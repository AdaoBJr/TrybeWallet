(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{32:function(e,t,a){e.exports=a.p+"static/media/trybe-logo.8b07e0b0.png"},33:function(e,t,a){e.exports=a.p+"static/media/trybe-wallet.b3b1c6ef.png"},36:function(e,t,a){e.exports=a(48)},45:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),l=a.n(c),s=a(20),i=a(8),o=(a(45),a(2)),d=a(18),u=a(10),p=a(11),m=a(4),E=a(13),h=a(12),b=a(14),v=a.n(b),f=a(19);function x(){return g.apply(this,arguments)}function g(){return(g=Object(f.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),console.log("deu erro!!!!!"),e.abrupt("return",Error(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var y=function(e){return{type:"SAVE_CURRENCIES_LIST",payload:{listCurrencies:e}}};var O=a(16),j=a(32),w=a.n(j),S=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"headerLogin"},r.a.createElement("img",{src:w.a,alt:"logotipo trybe"}),r.a.createElement("div",{className:"walletLogin"},r.a.createElement(O.e,{className:"wallet"}),r.a.createElement("h3",null,"Wallet"))),r.a.createElement("h2",null,"Acesse sua Carteira"),r.a.createElement("div",{className:"areaInputs"},r.a.createElement("div",{className:"inputEmail"},r.a.createElement(O.b,{className:"iconInput"}),r.a.createElement("input",{name:"email",placeholder:"Insira seu e-mail",onChange:e,"data-testid":"email-input"})),r.a.createElement("div",{className:"inputPwd"},r.a.createElement(O.d,{className:"iconInput"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Insira sua senha de 6 d\xedgitos",onChange:e,"data-testid":"password-input"}))))}}]),a}(n.Component),C=Object(i.b)((function(e){var t=e.user;return{email:t.email,password:t.password}}))(S),k=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",disabledBtn:!0},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.validationEmailPwd=n.validationEmailPwd.bind(Object(m.a)(n)),n}return Object(p.a)(a,[{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.value,r=a.name;this.setState(Object(d.a)({},r,n),(function(){t.validationEmailPwd()}))}},{key:"validationEmailPwd",value:function(){var e=this.state,t=e.email,a=e.password,n=/^[a-z0-9._]+@[a-z0-9]+\.[a-z]+(\.[a-z]+)?$/i.test(t),r=a.length;n&&r>=6?this.setState({disabledBtn:!1}):this.setState({disabledBtn:!0})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.disabledBtn,c=this.props.addEmailPassword;return r.a.createElement("div",{className:"Login"},r.a.createElement(C,{handleChange:this.handleChange}),r.a.createElement("div",{className:"areaButtonsLogin"},r.a.createElement(s.b,{to:"/carteira"},r.a.createElement("button",{type:"button",disabled:n,className:n?"enterBtnLogin-color":"enterBtnLogin",onClick:function(){return c(t,a)}},"Entrar"))))}}]),a}(r.a.Component),N=Object(i.b)(null,(function(e){return{addEmailPassword:function(t,a){return e(function(e,t){return{type:"ADD_LOGIN",payload:{email:e,password:t}}}(t,a))}}}))(k),D=a(33),I=a.n(D),T={id:"",value:"",description:"",currency:void 0,method:"",tag:"",currencies:{},showBtnEdit:!1},B=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state=T,n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleClickAdd=n.handleClickAdd.bind(Object(m.a)(n)),n.handleClickEdit=n.handleClickEdit.bind(Object(m.a)(n)),n.showEditingOnScreen=n.showEditingOnScreen.bind(Object(m.a)(n)),n.handleInputs=n.handleInputs.bind(Object(m.a)(n)),n.handleSelects=n.handleSelects.bind(Object(m.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchCoins)()}},{key:"componentDidUpdate",value:function(){this.props.editedExpense&&this.showEditingOnScreen()}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(d.a)({},n,a))}},{key:"handleClickAdd",value:function(){var e=Object(f.a)(v.a.mark((function e(){var t,a,n,r,c,l,s,i,o,d,u,p,m,E,h,b;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.value,n=t.description,r=t.currency,c=void 0===r?"USD":r,l=t.method,s=t.tag,i=t.showBtnEdit,o=this.props,d=o.expenses,u=o.editingExpense.exchangeRates,p=o.addToExpenses,m=o.addSumExpenses,i){e.next=12;break}return e.next=5,x();case 5:E=e.sent,h={id:d.length,value:a,description:n,currency:c,method:l,tag:s,exchangeRates:E},p(h),m(),this.setState(T),e.next=16;break;case 12:b={id:d.length,value:a,description:n,currency:c,method:l,tag:s,exchangeRates:u},p(b),m(),this.setState(T);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClickEdit",value:function(){var e=this.state,t=e.id,a=e.value,n=e.description,r=e.currency,c=e.method,l=e.tag,s=this.props;(0,s.addToExpenses)({id:t,value:a,description:n,currency:r,method:c,tag:l,exchangeRates:s.editingExpense.exchangeRates}),this.setState(T)}},{key:"handleInputs",value:function(e,t,a){return r.a.createElement("label",{htmlFor:t},e,r.a.createElement("input",{type:"text",name:t,id:t,value:a,className:t,"data-testid":"".concat(t,"-input"),onChange:this.handleChange}))}},{key:"handleSelects",value:function(e,t,a,n){return"Moeda:"===e?r.a.createElement("label",{htmlFor:t},e,r.a.createElement("select",{name:t,id:t,value:a,className:t,"data-testid":"".concat(t,"-input"),onChange:this.handleChange},n.filter((function(e){return"USDT"!==e})).map((function(e){return r.a.createElement("option",{key:e},e)})))):r.a.createElement("label",{htmlFor:t},e,r.a.createElement("select",{name:t,id:t,value:a,className:t,"data-testid":"".concat(t,"-input"),onChange:this.handleChange},r.a.createElement("option",null,"Selecione"),n.map((function(e){return r.a.createElement("option",{key:e},e)}))))}},{key:"showEditingOnScreen",value:function(){var e=this.props,t=e.editingExpense,a=t.id,n=t.value,r=t.description,c=t.currency,l=t.method,s=t.tag,i=e.handleShownExpense;this.setState({id:a,value:n,description:r,currency:c,method:l,tag:s,showBtnEdit:!0}),i()}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,c=e.method,l=e.tag,s=e.showBtnEdit,i=this.props.currencies;return r.a.createElement("div",{className:s?"formsWalletEdit":"formsWalletAdd"},r.a.createElement("div",{className:"forms"},this.handleInputs("Valor:","value",t),this.handleSelects("Moeda:","currency",n,i),this.handleSelects("M\xe9todo de pagamento:","method",c,["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"]),this.handleSelects("Tag:","tag",l,["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"]),this.handleInputs("Descri\xe7\xe3o:","description",a)),r.a.createElement("button",{type:"button","data-testid":"edit-btn",className:s?"editExpense":"addExpense",onClick:this.handleClickAdd},s?"Editar despesa":"Adicionar despesa"))}}]),a}(n.Component),P=Object(i.b)((function(e){var t=e.wallet;return{currencies:t.currencies,expenses:t.expenses,editingExpense:t.editingExpense,editedExpense:t.editedExpense}}),(function(e){return{fetchCoins:function(){return e(function(){var e=Object(f.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return a=e.sent,e.abrupt("return",t(y(a)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addToExpenses:function(t){return e({type:"ADD_EXPENSES",payload:{expense:t}})},addSumExpenses:function(){return e({type:"SUM_EXPENSES"})},handleShownExpense:function(){return e({type:"SHOW_EXPENSE",payload:{editedExpense:!1}})}}}))(B),R=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n.TableExpenses=n.TableExpenses.bind(Object(m.a)(n)),n.handleClickRemove=n.handleClickRemove.bind(Object(m.a)(n)),n}return Object(p.a)(a,[{key:"handleClickRemove",value:function(e){var t=this.props,a=t.removeExpense,n=t.addSumExpenses;a(e),n()}},{key:"TableExpenses",value:function(){var e=this,t=this.props,a=t.expenses,n=t.handleClickEdit;return a.map((function(t){var a=t.id,c=t.description,l=t.tag,s=t.method,i=t.value,o=t.currency,d=t.exchangeRates[o];return r.a.createElement("tr",{key:a,className:a%2===0?"tableBody isEven":"tableBody"},r.a.createElement("td",null,c),r.a.createElement("td",null,l),r.a.createElement("td",null,s),r.a.createElement("td",null,i),r.a.createElement("td",null,d.name),r.a.createElement("td",null,parseFloat(d.ask).toFixed(2)),r.a.createElement("td",null,(d.ask*i).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,function(t){return r.a.createElement("div",{className:"areaButtons"},r.a.createElement("button",{type:"button","data-testid":"edit-btn",className:"editButton",onClick:function(){return n(t)}},r.a.createElement(O.a,{className:"editIcon"})),r.a.createElement("button",{type:"button","data-testid":"delete-btn",className:"eraseButton",onClick:function(){return e.handleClickRemove(t)}},r.a.createElement(O.c,{className:"eraseIcon"})))}(a)))}))}},{key:"render",value:function(){return r.a.createElement("table",{className:"tableWallet"},r.a.createElement("thead",{className:"tableHeader"},r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,this.TableExpenses()))}}]),a}(n.Component),_=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{removeExpense:function(t){return e(function(e){return{type:"DELETE_EXPENSE",payload:{id:e}}}(t))},handleClickEdit:function(t){return e(function(e){return{type:"EDIT_EXPENSE",payload:{id:e}}}(t))},addSumExpenses:function(){return e({type:"SUM_EXPENSES"})}}}))(R),A=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.totalExpenses;return r.a.createElement("div",{className:"walletPage"},r.a.createElement("div",{className:"walletHeader"},r.a.createElement("img",{src:I.a,alt:"imagem trybe"}),r.a.createElement("div",{className:"email_totalExpenses"},r.a.createElement("p",{"data-testid":"email-field"},"E-mail: ".concat(t)),r.a.createElement("p",{"data-testid":"total-field"},"Despesa Total: R$ ".concat(a||"0")),r.a.createElement("p",{"data-testid":"header-currency-field"},"BRL"))),r.a.createElement("div",{className:"walletForms"},r.a.createElement(P,null),r.a.createElement(_,null)))}}]),a}(r.a.Component),L=Object(i.b)((function(e){return{email:e.user.email,totalExpenses:e.wallet.totalExpenses}}))(A);var M=function(){return r.a.createElement("div",null,r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:N}),r.a.createElement(o.a,{path:"/carteira",component:L})))},X=a(15),F=a(34),W=a(35),U=a(3),z={email:"",password:""},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_LOGIN":var a=t.payload,n=a.email,r=a.password;return Object(U.a)(Object(U.a)({},e),{},{email:n,password:r});default:return e}},H=a(22);function $(e){return e.map((function(e){var t=e.value,a=e.currency;return e.exchangeRates[a].ask*t})).reduce((function(e,t){return e+t}),0).toFixed(2)}function G(e,t){return Object(H.a)(t).filter((function(t){return t.id!==e}))}function J(e,t){var a=Object(H.a)(t).find((function(t){return t.id===e}));return{updatedExpenses:G(e,t),editingExpense:a,editedExpense:!0}}var q={expenses:[],currencies:[],totalExpenses:"0",editingExpense:{},editedExpense:!1},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_CURRENCIES_LIST":var a=t.payload.listCurrencies,n=Object.keys(a);return Object(U.a)(Object(U.a)({},e),{},{currencies:n});case"ADD_EXPENSES":var r=t.payload.expense,c=e.expenses;return Object(U.a)(Object(U.a)({},e),{},{expenses:[].concat(Object(H.a)(c),[r])});case"SUM_EXPENSES":var l=e.expenses,s=$(l);return Object(U.a)(Object(U.a)({},e),{},{totalExpenses:s});case"DELETE_EXPENSE":var i=t.payload.id,o=e.expenses,d=G(i,o);return Object(U.a)(Object(U.a)({},e),{},{expenses:d});case"EDIT_EXPENSE":var u=t.payload.id,p=e.expenses,m=J(u,p),E=m.updatedExpenses,h=m.editingExpense,b=m.editedExpense;return Object(U.a)(Object(U.a)({},e),{},{expenses:E,editingExpense:h,editedExpense:b});case"SHOW_EXPENSE":var v=t.payload.editedExpense;return Object(U.a)(Object(U.a)({},e),{},{editedExpense:v});default:return e}},Q=Object(X.combineReducers)({user:V,wallet:K}),Y=Object(X.createStore)(Q,Object(F.composeWithDevTools)(Object(X.applyMiddleware)(W.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(i.a,{store:Y},r.a.createElement(s.a,null,r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.0d5b8f18.chunk.js.map